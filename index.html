<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ìœ ëŸ½ ì—¬í–‰ ì˜ˆì‚° ê³„ì‚°ê¸°</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  <div class="container">
body {
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(135deg,#667eea,#764ba2);
  color:white;
  padding:20px;
}
</div>
h1 {
  text-align:center;
  margin-bottom:20px;
}

.container {
  max-width:900px;
  margin:auto;
  background:white;
  color:black;
  padding:25px;
  border-radius:20px;
  box-shadow:0 10px 30px rgba(0,0,0,0.3);
}

input {
  padding:10px;
  margin:8px 0;
  width:100%;
  border-radius:8px;
  border:1px solid #ccc;
}

.filters button {
  margin:4px;
  padding:8px 12px;
  border:none;
  background:#667eea;
  color:white;
  border-radius:8px;
  cursor:pointer;
  transition:0.2s;
}

.filters button:hover {
  transform:scale(1.05);
  background:#5a67d8;
}

.card {
  background:#f8f9fa;
  padding:12px;
  margin:6px 0;
  border-radius:10px;
  transition:0.2s;
}

.card:hover {
  transform:translateY(-3px);
  box-shadow:0 5px 15px rgba(0,0,0,0.2);
}

button.calc {
  width:100%;
  padding:12px;
  background:#28a745;
  color:white;
  border:none;
  border-radius:10px;
  font-size:16px;
  margin-top:12px;
  cursor:pointer;
}

button.calc:hover {
  background:#218838;
}

.result {
  margin-top:15px;
  font-weight:bold;
  font-size:18px;
}
</style>
  
</head>

<body>

<h1>ğŸŒ ìœ ëŸ½ ì—¬í–‰ ë¹„ìš© ê³„ì‚°ê¸°</h1>

<input type="text" id="search" placeholder="êµ­ê°€ ê²€ìƒ‰..." onkeyup="filterCountries()">

<div class="filters">
<button onclick="filterRegion('all')">ì „ì²´</button>
<button onclick="filterRegion('west')">ì„œìœ ëŸ½</button>
<button onclick="filterRegion('south')">ë‚¨ìœ ëŸ½</button>
<button onclick="filterRegion('north')">ë¶ìœ ëŸ½</button>
<button onclick="filterRegion('east')">ë™ìœ ëŸ½</button>
</div>

<input type="number" id="days" placeholder="ì—¬í–‰ ì¼ìˆ˜ ì…ë ¥">

<div id="countries"></div>

<button class="calc" onclick="calculate()">ì´ ë¹„ìš© ê³„ì‚°</button>

<div class="result" id="result"></div>

<canvas id="chart"></canvas>

<script>

// êµ­ê°€ ë°ì´í„° (1ì¼ í‰ê·  ìœ ë¡œ ê¸°ì¤€)
const countryData = [
{ name:"í”„ë‘ìŠ¤", cost:120, region:"west"},
{ name:"ë…ì¼", cost:110, region:"west"},
{ name:"ë„¤ëœë€ë“œ", cost:130, region:"west"},
{ name:"ë²¨ê¸°ì—", cost:115, region:"west"},
{ name:"ì˜¤ìŠ¤íŠ¸ë¦¬ì•„", cost:120, region:"west"},
{ name:"ì´íƒˆë¦¬ì•„", cost:110, region:"south"},
{ name:"ìŠ¤í˜ì¸", cost:100, region:"south"},
{ name:"í¬ë¥´íˆ¬ê°ˆ", cost:95, region:"south"},
{ name:"ê·¸ë¦¬ìŠ¤", cost:90, region:"south"},
{ name:"ìŠ¤ìœ„ìŠ¤", cost:180, region:"north"},
{ name:"ìŠ¤ì›¨ë´", cost:150, region:"north"},
{ name:"ë…¸ë¥´ì›¨ì´", cost:170, region:"north"},
{ name:"ë´ë§ˆí¬", cost:140, region:"north"},
{ name:"í•€ë€ë“œ", cost:145, region:"north"},
{ name:"ì²´ì½”", cost:80, region:"east"},
{ name:"í—ê°€ë¦¬", cost:75, region:"east"},
{ name:"í´ë€ë“œ", cost:70, region:"east"},
{ name:"í¬ë¡œì•„í‹°ì•„", cost:85, region:"east"},
{ name:"ìŠ¬ë¡œë² ë‹ˆì•„", cost:90, region:"east"},
];

const container = document.getElementById("countries");

countryData.forEach(country => {
  const div = document.createElement("div");
  div.className = "card";
  div.setAttribute("data-region", country.region);
  div.innerHTML = `
    <input type="checkbox" value="${country.cost}">
    ${country.name} (1ì¼ í‰ê·  â‚¬${country.cost})
  `;
  container.appendChild(div);
});

// ê²€ìƒ‰ ê¸°ëŠ¥
function filterCountries(){
  const keyword = document.getElementById("search").value.toLowerCase();
  const cards = document.querySelectorAll(".card");
  cards.forEach(card=>{
    card.style.display = card.innerText.toLowerCase().includes(keyword) ? "block" : "none";
  });
}

// ì§€ì—­ í•„í„°
function filterRegion(region){
  const cards = document.querySelectorAll(".card");
  cards.forEach(card=>{
    if(region==="all" || card.dataset.region===region){
      card.style.display="block";
    } else {
      card.style.display="none";
    }
  });
}

// í™˜ìœ¨ ê°€ì ¸ì˜¤ê¸° (ë¬´ë£Œ API)
async function fetchExchangeRate() {
  const res = await fetch('https://api.frankfurter.app/latest?from=EUR&to=KRW');
  const data = await res.json();
  return data.rates.KRW;
}

// í•­ê³µê¶Œ í‰ê· ê°€ (ì„ì‹œ í‰ê· ê°’ - API ì—†ì´ ì‘ë™)
function getEstimatedFlightPrice() {
  return 900; // í‰ê·  900ìœ ë¡œ ê°€ì •
}

let chart;

async function calculate(){
  const days = document.getElementById("days").value;
  const checked = document.querySelectorAll("input[type=checkbox]:checked");

  if (!days || checked.length === 0) {
    alert("ì—¬í–‰ ì¼ìˆ˜ì™€ êµ­ê°€ë¥¼ ì„ íƒí•˜ì„¸ìš”!");
    return;
  }

  const rate = await fetchExchangeRate();

  let totalKRW = 0;
  let labels = [];
  let dataArr = [];

  checked.forEach(c=>{
    const costEUR = c.value * days;
    const costKRW = costEUR * rate;
    totalKRW += costKRW;

    labels.push(c.parentElement.innerText);
    dataArr.push(Math.round(costKRW));
  });

  // í•­ê³µê¶Œ ì¶”ê°€
  const flightEUR = getEstimatedFlightPrice();
  const flightKRW = flightEUR * rate;
  totalKRW += flightKRW;

  document.getElementById("result").innerHTML =
    `ì´ ì˜ˆìƒ ë¹„ìš©: â‚©${Math.round(totalKRW).toLocaleString()}
     <br>(í•­ê³µê¶Œ í¬í•¨ ì•½ â‚©${Math.round(flightKRW).toLocaleString()})`;

  if(chart) chart.destroy();

  chart = new Chart(document.getElementById("chart"), {
    type:"bar",
    data:{
      labels:[...labels, "í•­ê³µê¶Œ"],
      datasets:[{
        label:"ë¹„ìš© (ì›)",
        data:[...dataArr, Math.round(flightKRW)]
      }]
    }
  });
}

</script>

</body>
</html>
